# online slave database niux_auto_pay
DB_AUTOPAY_HOST=nj02-dba-dbbk-001.nj02
DB_AUTOPAY_PORT=3603
DB_AUTOPAY_USER=linmu
DB_AUTOPAY_PWD=9aha88zW5J
AUTOPAY_OLD=niux_auto_pay
AUTOPAY_NEW=financial_settlement

# test database niux_auto_pay
DB_AUTOPAY_TEST_HOST=10.94.47.23
DB_AUTOPAY_TEST_PORT=3603
DB_AUTOPAY_TEST_USER=test
DB_AUTOPAY_TEST_PWD=sewtdfwtest
AUTOPAY_TEST_OLD_FUNC=niux_auto_pay
AUTOPAY_TEST_NEW_FUNC=niux_auto_pay_new
AUTOPAY_TEST_OLD_AUTO=niux_auto_pay_z
AUTOPAY_TEST_NEW_AUTO=niux_auto_pay_new_z
FINANCE_AUTO=finance_auto

# online database detail table
DB_DETAIL_HOST=10.202.161.47   
DB_DETAIL_PORT=7090
DB_DETAIL_USER=financial_bei
DB_DETAIL_PWD=lfejfJfewnfa
DETAIL=financial

# test database detail table (not ddbs) 
DB_DETAIL_TEST_HOST=10.94.47.23
DB_DETAIL_TEST_PORT=3603
DB_DETAIL_TEST_USER=test
DB_DETAIL_TEST_PWD=sewtdfwtest
DETAIL_TEST=financial

# test database detail table (ddbs) 
DB_DETAIL_TEST_DDBS_HOST=10.94.47.23
DB_DETAIL_TEST_DDBS_PORT=3500
DB_DETAIL_TEST_DDBS_USER=ddbsuser
DB_DETAIL_TEST_DDBS_PWD=ddbsuser123
DETAIL_TEST_DDBS=niux_pay_detail

# finance_data_task 
DB_FINANCE_DATA_TASK_HOST=10.94.167.106
DB_FINANCE_DATA_TASK_USER=nuomi
DB_FINANCE_DATA_TASK_PWD=nuomiapptest
FINANCE_DATA_TASK=finance_test

# log file path
LOG_PATH=logs
## log file
LOG_FILE_NAME=finance_autotest.log

# date file path
DATA_PATH=data
## queue_id deal_id map file
QUEUEID_DEALID_FILE_NAME=queueid_dealid
## deal_id file
DEALID_FILE_NAME=deal_id
## queue_id file
QUEUEID_FILE_NAME=queue_id
## rule_id file
RULEID_FILE_NAME=rule_id
## contract_queue file
CONTRACT_QUEUE_FILE_NAME=contract_queue
## contract_relation file
CONTRACT_RELATION_FILE_NAME=contract_relation
## settlement_rule file
SETTLEMENT_RULE_FILE_NAME=settlement_rule
## settlement_rule_ext file
SETTLEMENT_RULE_EXT_FILE_NAME=settlement_rule_ext
## stat_day_option file
STAT_DAY_OPTION_FILE_NAME=stat_day_option
## cert_tiankeng_stat file
CERT_TIANKENG_STAT_FILE_NAME=cert_tiankeng_stat
## payment_record file
PAYMENT_RECORD_FILE_NAME=payment_record
## payment_task file
PAYMENT_TASK_FILE_NAME=payment_task
## nonautomatic_payment_task file
NON_PAYMENT_TASK_FILE_NAME=nonautomatic_payment_task
## payment_task_belong file
PAYMENT_TASK_BELONG_FILE_NAME=payment_task_belong
## stat_deal file
STAT_DEAL_FILE_NAME=stat_deal
## stat_certificate file
STAT_CERTIFICATE_FILE_NAME=stat_certificate
## stat_certificate_use_cancel file
STAT_CERTIFICATE_USE_CANCEL_FILE_NAME=stat_certificate_use_cancel
## stat_refund_record file
STAT_REFUND_RECORD_FILE_NAME=stat_refund_record
## stat_order file
STAT_ORDER_FILE_NAME=stat_order
## settle_date file
SETTLE_DATE_FILE_NAME=settle_date

# tested modules
## fss-detail-job deploy path
FSS_DETAIL_JOB_DEPLOY_PATH=/home/nuomi/qa/linmu/fss-detail-job
## fss-task-job 
FSS_TASK_JOB_DEPLOY_PATH=/home/nuomi/qa/linmu/fss-task-job

# subgroup size
GROUP_SIZE=100

# etract online data config
IDS_INDEX=<ids>

# SQL
## extract online data sql
EXTRACT_ONLINE_DATA_SQL=select id,deal_id from contract_queue where is_mer_confirm = -1 and status = 2 and is_auto_pay = 1 and sys_type = 2 and biz_id = 1 and pay_type = 1 and is_fill_bill = 1 order by id desc limit 5000,50
## initialize stat_deal sql
INI_STAT_DEAL_SQL=update stat_deal set process = 1;
## initialize stat_certificate sql
INI_STAT_CERTIFICATE_SQL=update stat_certificate set process = 1;
## initialize stat_certificate_use_cancel sql
INI_STAT_CERTIFICATE_USE_CANCEL_SQL=update stat_certificate_use_cancel set process = 1;
## initialize stat_refund_record sql
INI_STAT_REFUND_RECORD_SQL=update stat_refund_record set process = 1;
## initialize stat_order sql
INI_STAT_ORDER_SQL=update stat_order set process = 1;
## initialize settle_date sql
INI_SETTLE_DATE_SQL=select q.deal_id,q.id,FROM_UNIXTIME(UNIX_TIMESTAMP(DATE_FORMAT(r.settlement_start_time,'%Y%m%d'))+86400*6,'%Y%m%d') as settle_start_date,FROM_UNIXTIME(UNIX_TIMESTAMP(DATE_FORMAT(r.settlement_start_time,'%Y%m%d'))+86400*6,'%Y%m%d') as settle_current_date,FROM_UNIXTIME(UNIX_TIMESTAMP(DATE_FORMAT(r.settlement_end_time,'%Y%m%d'))+86400*2,'%Y%m%d') as settle_end_date,rx.rule_value from contract_queue q,settlement_rule r,settlement_rule_ext rx where q.id=r.queue_id and r.rule_id=rx.rule_id and rx.rule_key=\week_num\;
## initialize contract_queue sql
INI_CONTRACT_QUEUE_SQL=update contract_queue q set status = 0,is_mer_confirm = -1;update contract_queue q,finance_auto.settle_date sd set q.next_settle_date=sd.settle_start_date where q.id=sd.queue_id;
## initialize settlement_detail sql
INI_SETTLEMENT_DETAIL_SQL=update settlement_detail set settlement_status = 1,task_id = 0;
## initialize detail_info sql
INI_DETAIL_INFO_SQL=update detail_info set settlement_status = 1,task_id = 0;
